
<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Amwaj Apartments</title>
<style>
 body{background:#082d2e;color:#e8f6f4;font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;margin:0}
 .wrap{max-width:1100px;margin:0 auto;padding:20px}
 h1{margin:10px 0 20px}
 .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
 .card{background:#0a3434;border:1px solid rgba(255,255,255,.12);border-radius:14px;overflow:hidden}
 .photo{aspect-ratio:16/10;background:#0e5556;display:flex;align-items:center;justify-content:center}
 .thumbs{display:flex;gap:8px;overflow:auto;padding:10px;background:#093131;border-top:1px solid rgba(255,255,255,.08)}
 .thumbs img{height:56px;border-radius:8px;border:1px solid rgba(255,255,255,.14);cursor:pointer}
 .title{padding:12px}
 .modal{position:fixed;inset:0;background:rgba(0,0,0,.8);display:none;align-items:center;justify-content:center}
 .modal.open{display:flex}
 .modal img{max-width:90vw;max-height:85vh}
 .bar{position:fixed;bottom:20px;left:0;right:0;text-align:center}
 .btn{margin:0 6px;padding:8px 12px;border-radius:10px;border:1px solid #8de9e0;background:#12bfb6;color:#002;cursor:pointer}
 @media(max-width:800px){.grid{grid-template-columns:1fr 1fr}}
 @media(max-width:520px){.grid{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="wrap">
  <h1>Amwaj Apartments</h1>
  <div id="cards" class="grid"></div>
</div>

<div id="gallery" class="modal">
  <img id="gImg" alt="Фото">
  <div class="bar">
    <button id="prev" class="btn">←</button>
    <button id="next" class="btn">→</button>
    <button id="close" class="btn">Закрыть</button>
  </div>
</div>

<script>
var APARTMENTS = [
  {corp:'20', id:'201', bedrooms:2, photos:[]},
  {corp:'20', id:'202', bedrooms:2, photos:['./img/202/1.jpeg','./img/202/2.jpeg','./img/202/3.jpeg','./img/202/4.jpeg','./img/202/5.jpeg','./img/202/6.jpeg','./img/202/7.jpeg','./img/202/8.jpeg','./img/202/9.jpeg','./img/202/10.jpeg','./img/202/11.jpeg','./img/202/12.jpeg']},
  {corp:'20', id:'203', bedrooms:2, photos:[]},
  {corp:'20', id:'204', bedrooms:2, photos:[]},
  {corp:'20', id:'205', bedrooms:2, photos:[]},
  {corp:'20', id:'206', bedrooms:2, photos:[]},
  {corp:'6',  id:'601', bedrooms:1, photos:['./img/601/1.jpeg','./img/601/2.jpeg','./img/601/3.jpeg','./img/601/4.jpeg','./img/601/5.jpeg','./img/601/6.jpeg','./img/601/7.jpeg','./img/601/8.jpeg','./img/601/9.jpeg','./img/601/10.jpeg','./img/601/11.jpeg','./img/601/12.jpeg']},
  {corp:'6',  id:'602', bedrooms:1, photos:['./img/602/1.jpeg','./img/602/2.jpeg','./img/602/3.jpeg','./img/602/4.jpeg','./img/602/5.jpeg','./img/602/6.jpeg','./img/602/7.jpeg','./img/602/8.jpeg','./img/602/9.jpeg','./img/602/10.jpeg','./img/602/11.jpeg','./img/602/12.jpeg']},
  {corp:'6',  id:'603', bedrooms:1, photos:['./img/603/1.jpeg','./img/603/2.jpeg','./img/603/3.jpeg','./img/603/4.jpeg','./img/603/5.jpeg','./img/603/6.jpeg','./img/603/7.jpeg','./img/603/8.jpeg','./img/603/9.jpeg','./img/603/10.jpeg','./img/603/11.jpeg','./img/603/12.jpeg']},
  {corp:'6',  id:'605', bedrooms:1, photos:[]},
  {corp:'6',  id:'606', bedrooms:1, photos:[]},
  {corp:'6',  id:'609', bedrooms:1, photos:[]}
];

function placeholder(text){
  return "data:image/svg+xml;utf8," +
    "<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1200\" height=\"750\">" +
    "<rect width=\"100%\" height=\"100%\" fill=\"#0e5556\"/>" +
    "<text x=\"50%\" y=\"50%\" dominant-baseline=\"middle\" text-anchor=\"middle\" " +
    "font-family=\"Segoe UI,Roboto,Arial\" font-size=\"56\" fill=\"#b7fff6\" opacity=\".85\">" +
    text + "</text></svg>";
}

var cards = document.getElementById('cards');
APARTMENTS.forEach(function(a){
  var main = (a.photos && a.photos.length) ? a.photos[0] : placeholder(a.corp + "-" + a.id);
  var card = document.createElement('div');
  card.className = 'card';
  card.innerHTML = '<div class="photo"><img src="'+main+'" alt="" style="width:100%;height:100%;object-fit:cover"></div>' +
                   '<div class="thumbs">' +
                   (a.photos && a.photos.length ? a.photos.map(function(p,i){return '<img src="'+p+'" data-corp="'+a.corp+'" data-id="'+a.id+'" data-idx="'+i+'">'}).join('') : '') +
                   '</div>' +
                   '<div class="title"><b>Корпус '+a.corp+', апартамент '+a.id+'</b></div>';
  cards.appendChild(card);
});

var modal = document.getElementById('gallery');
var gImg = document.getElementById('gImg');
var cur = {list:[], idx:0, name:''};

function openGallery(corp,id,idx){
  var a = APARTMENTS.find(function(x){return x.corp===corp && x.id===id;});
  if(!a) return;
  cur.list = a.photos && a.photos.length ? a.photos : [placeholder(corp+'-'+id)];
  cur.idx = Math.max(0, Math.min(idx||0, cur.list.length-1));
  cur.name = 'Корпус '+corp+', апартамент '+id;
  gImg.src = cur.list[cur.idx];
  modal.classList.add('open');
}

document.getElementById('prev').onclick = function(){ if(!cur.list.length) return; cur.idx=(cur.idx-1+cur.list.length)%cur.list.length; gImg.src=cur.list[cur.idx]; };
document.getElementById('next').onclick = function(){ if(!cur.list.length) return; cur.idx=(cur.idx+1)%cur.list.length; gImg.src=cur.list[cur.idx]; };
document.getElementById('close').onclick = function(){ modal.classList.remove('open'); };
modal.addEventListener('click', function(e){ if(e.target===modal) modal.classList.remove('open'); });

document.querySelectorAll('.thumbs img').forEach(function(img){
  img.addEventListener('click', function(e){
    openGallery(e.target.getAttribute('data-corp'), e.target.getAttribute('data-id'), +e.target.getAttribute('data-idx'));
  });
});
</script>
</body>
</html>
